# SuaveIO

Я проанализировал проект [Suave](https://suave.io/). Это очень легкий
кросплатформенный асинхронный веб сервер, написанный на [F#](http://fsharp.org/)
Код доступен в открытом виде [здесь](https://github.com/SuaveIO/suave) под лицензией
[Apache License 2.0](http://www.apache.org/licenses/LICENSE-2.0).

Я анализировал данный проект по причине того что он написан на функциональном языке F#.

Основные преимущества функциональных языков:

 * **immutable data** - если обьект не может изменяться, то алгоритм обработки такого обьекта можно
 очень легко распаралелить на несколько процессов/машин
 * **more code -> more bugs** - по статистике, чем больше кода мы пишем, тем больше ошибок в
 нем создаем, а использование обьектно-ориентированных языков приводит к написанию еще
 большего количества кода (_поскольку разделяется функциональность между классами, каждый из которых имеет
 некоторый обьем кода для определения; написание тестов на каждый клас и т.д._)

## Инструменты для анализа

[FSharpLint](http://fsprojects.github.io/FSharpLint/) - утилита подобная **CheckStyle** для **Java**

## Результаты

Есть некоторые отклонения от принятых правил по форматированию кода, например, используется стиль `camelCase`
вместо `PascalCase`; используются подчеркивания(`_`) в перечислениях (_коды ошибок_), но это не приводит
к путанице, поскольку применяется во всем проекте.

Также заметил некоторые разногласия в стиле самого проекта (_присутствуют функции для логирования более высокого
уровня - `verbose`, `info` но во многих местах используется низкоуровневая `log` принимающая очень много параметров_),
но это неизбежно, так как во время написания проекта некоторые части постепенно улучшаются, но при
каждом небольшом улучшении менять в соответствии с ним код не представляется возможным (_как известно, есть 2 вещи,
которые разработчик может делать вечно - настраивать vim и рефакторить код_).

Способ написания документации отличается от принятого в Java, что более удобно, поскольку есть
файлы "заголовков" `*.fsi`, в которых содержится интерфейс функций и классов, xml документация,
которая используется для подсказок в intellisence и, самое главное, документация находится
отдельно от кода (_но во время компиляции все сопоставляется, потому несоответствий не получается_),
и потому можно разбираться в коде, не отвлекаясь на массу комментариев.

Также проект имеет весьма хорошее покрытие тестами. Они являются дополнением к документации,
и в то же время проверяют работоспособность, что делает refactoring процесс(_процесс улучшения кода_) намного
проще, безопаснее и легче.

Но все же некоторые [ошибки](https://github.com/SuaveIO/suave/issues) есть, ведь использование
функционального языка не избавляет полностью от ошибок, а лишь уменьшает их количество. Также
F# не является чисто функциональным языком, он также обьектно-ориентированный и может использовать
существующие библиотеки из .Net фреймворка.